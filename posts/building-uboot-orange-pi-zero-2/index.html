<!DOCTYPE html>
<html lang="en">
	<head itemscope itemtype="https://www.slashinit.com/">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title itemprop="name">Building u-boot for Orange Pi Zero 2</title>
		
<meta property="og:title" content="Building u-boot for Orange Pi Zero 2" />
<meta name="twitter:title" content="Building u-boot for Orange Pi Zero 2" />
<meta itemprop="name" content="Building u-boot for Orange Pi Zero 2" />
<meta name="application-name" content="Building u-boot for Orange Pi Zero 2" />
<meta property="og:site_name" content="SlashInit" />

<meta name="description" content="Steps to compile mainline u-boot from source for Orange Pi Zero 2" />
<meta itemprop="description" content="Steps to compile mainline u-boot from source for Orange Pi Zero 2" />
<meta property="og:description" content="Steps to compile mainline u-boot from source for Orange Pi Zero 2" />
<meta name="twitter:description" content="Steps to compile mainline u-boot from source for Orange Pi Zero 2" />
<meta name="twitter:card" content="Steps to compile mainline u-boot from source for Orange Pi Zero 2">

<base href="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2/">
<link rel="canonical" href="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2/" itemprop="url" />
<meta name="url" content="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2/" />
<meta name="twitter:url" content="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2/" />
<meta property="og:url" content="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2/" />

<meta property="og:locale" content="en">
<meta name="language" content="Global">
<link rel="alternate" hreflang="en" href="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2/" title="Global">



<meta itemprop="image" content="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2//images/thumbnail.png" />
<meta property="og:image" content="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2//images/thumbnail.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@SlashInit" />
<meta name="twitter:image" content="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2//images/thumbnail.png" />
<meta name="twitter:image:src" content="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2//images/thumbnail.png" />


<meta property="og:updated_time" content=2023-10-04T13:15:13&#43;0530 />
<link rel="sitemap" type="application/xml" title="Sitemap" href="https://www.slashinit.com//sitemap.xml" />



  <meta property="og:type" content="article" />
  <meta property="article:publisher" content="SlashInit" />
  <meta property="og:article:published_time" content=2023-10-02T12:32:08&#43;0530 />
  <meta property="article:published_time" content=2023-10-02T12:32:08&#43;0530 />

  
    <meta property="og:article:author" content="Naveen" />
    <meta property="article:author" content="Naveen" />
    <meta name="author" content="Naveen" />
  

  
    <meta name="news_keywords" content="bootloaders" />
    <meta property="article:section" content="bootloaders" />
  

  <script defer type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "headline": "Building u-boot for Orange Pi Zero 2",
      "author": {
        "@type": "Person",
        "name": "Naveen"
      },
      "datePublished": "2023-10-02",
      "description": "Steps to compile mainline u-boot from source for Orange Pi Zero 2",
      "wordCount":  783 ,
      "mainEntityOfPage": "True",
      "dateModified": "2023-10-04",
      "image": {
        "@type": "imageObject",
		"url": "https:\/\/www.slashinit.com\/posts\/building-uboot-orange-pi-zero-2\//images/thumbnail.png"
      },
      "publisher": {
        "@type": "Organization",
        "name": "www.slashinit.com",
        "logo": {
          "@type": "imageObject",
		  "url": "https:\/\/www.slashinit.com\/images\/logo.png"
        }
      }
    }
  </script>


<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />



<meta name="keywords" content=" bootloader,u-boot,orange,pi,zero,compile,build, " />
<meta name="imagemode" content="force" />
<meta name="coverage" content="Worldwide" /> 
<meta name="distribution" content="Global" />
<meta name="HandheldFriendly" content="True" /> 
<meta name="msapplication-tap-highlight" content="no" />
<meta name="apple-mobile-web-app-title" content="SlashInit" /> 
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-touch-fullscreen" content="yes" /> 

		<link href="https://fonts.googleapis.com/css?family=Muli:300,400,700|Playfair+Display:400,700,900" rel="stylesheet">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Caveat">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu+Mono">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css">
		<link rel="stylesheet" href="/css/style.css">
		<link rel="icon" href="/images/favicon.png" type="image/png" sizes="16x16">
		
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y3YQGMSPLK"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-Y3YQGMSPLK', { 'anonymize_ip': false });
}
</script>

	</head>
	<body>
		
		<div class="site-wrap">

			
			<div class="site-mobile-menu">
				<div class="site-mobile-menu-header">
					<div class="site-mobile-menu-close mt-3">
						<span><i class="fa fa-times js-menu-toggle" aria-hidden="true"></i></span>
					</div>
				</div>
				<div class="site-mobile-menu-body"></div>
			</div>

			<header class="site-navbar" role="banner">
				<div class="container-fluid">
					<div class="row align-items-center">

						<div class="col-3 site-logo">
							<a href="/" class="text-white h2 mb-0">$ /init</a><div class="blink-cursor"><i></i></div>
						</div>

						<div class="col-8 text-right">
							<nav class="site-navigation" role="navigation">
								<ul class="site-menu js-clone-nav mr-auto d-none d-lg-block mb-0">
									
									<li><a href="/">Home</a></li>
									<li><a href="/posts/">All Posts</a></li>
									<li><a href="/categories/">Categories</a></li>
									<li><a href="/tags/">Tags</a></li>
								</ul>
							</nav>
							<a href="#" class="site-menu-toggle js-menu-toggle text-white d-inline-block d-lg-none"><i class="fa fa-bars" aria-hidden="true"></i></a></div>
					</div>
				</div>
			</header>
			
<section class="site-section py-lg">

	<div class="container">
		<div class="post-content-heading">
			<h1>Building u-boot for Orange Pi Zero 2</h1>
			
			<a href="/tags/u-boot"><span class="badge badge-info">#u-boot</span></a>
			
			<a href="/tags/arm"><span class="badge badge-info">#arm</span></a>
			
			<a href="/tags/operating-system"><span class="badge badge-info">#operating-system</span></a>
			
			<a href="/tags/boot"><span class="badge badge-info">#boot</span></a>
			
			<a href="/tags/linux"><span class="badge badge-info">#linux</span></a>
			
			<a href="/tags/microprocessors"><span class="badge badge-info">#microprocessors</span></a>
			
		</div>

		<div class="row post-author-bar">
			<div class="col-md-auto entry2 align-items-center">
				<div class="post-meta align-items-center text-left clearfix">
					<figure class="author-figure mb-0 mr-3 float-left"><img src="/images/authors/naveen.jpg" alt="Image" class="img-fluid"></figure>
					<span class="d-inline-block mt-1">By <a href="https://slashinit.com/about/">Naveen</a></span>
					<span>&nbsp;-&nbsp; October 2, 2023 </span>
				</div>
			</div>
			<div class="col-md-4"></div>
			<span class="share">
				<a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f&amp;title=Building%20u-boot%20for%20Orange%20Pi%20Zero%202&amp;summary=Steps%20to%20compile%20mainline%20u-boot%20from%20source%20for%20Orange%20Pi%20Zero%202&amp;source=https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f" target="_blank" rel="noopener" aria-label="">
					<i class="fa fa-linkedin-square"></i>
				</a>
				<a href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f" target="_blank" rel="noopener" aria-label="">
					<i class="fa fa-facebook-square"></i>
				</a>
				<a href="https://twitter.com/intent/tweet/?text=Building%20u-boot%20for%20Orange%20Pi%20Zero%202&url=https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f" target="_blank" rel="noopener" aria-label="">
					<i class="fa fa-twitter-square"></i>
				</a>
				<a href="whatsapp://send?text=Building%20u-boot%20for%20Orange%20Pi%20Zero%202 - https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f" target="_blank" rel="noopener" aria-label="">
					<i class="fa fa-whatsapp"></i>
				</a>
				<span>
		</div>
		<div class="row blog-entries element-animate">
			<div class="share-hidden" style="display:none">
				<ul id="social-sidebar">
					<li>
						<a class="entypo-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f&amp;title=Building%20u-boot%20for%20Orange%20Pi%20Zero%202&amp;summary=Steps%20to%20compile%20mainline%20u-boot%20from%20source%20for%20Orange%20Pi%20Zero%202&amp;source=https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f" target="_blank" rel="noopener" aria-label="">
							<i class="fa fa-linkedin-square"></i><span>LinkedIn</span>
						</a>
					</li>
					<li>
						<a class="entypo-facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f" target="_blank" rel="noopener" aria-label="">
							<i class="fa fa-facebook-square"></i><span>Facebook</span>
						</a>
					</li>
					<li>
						<a class="entypo-twitter" href="https://twitter.com/intent/tweet/?text=Building%20u-boot%20for%20Orange%20Pi%20Zero%202&url=https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f" target="_blank" rel="noopener" aria-label="">
							<i class="fa fa-twitter-square"></i><span>Twitter</span>
						</a>
					</li>
					<li>
						<a class="entypo-whatsapp" href="whatsapp://send?text=Building%20u-boot%20for%20Orange%20Pi%20Zero%202 - https%3a%2f%2fwww.slashinit.com%2fposts%2fbuilding-uboot-orange-pi-zero-2%2f" target="_blank" rel="noopener" aria-label="">
							<i class="fa fa-whatsapp"></i><span>WhatsApp</span>
						</a>
					</li>
				</ul>
			</div>

			<div class="col-md-12 col-lg-8 main-content">

				<div class="post-content-body">
					<p>I recently got my Orange Pi Zero 2 shipped and in the previous article, we discussed <a href="/posts/booting-linux-orange-pi-zero-2/">how to boot official linux images from orangepi.org</a>. In this article, we are going to learn how we can build u-boot image for our Orange Pi Zero 2 board from the mainline source.</p>
<h2 id="step-1--build-atf-arm-trusted-firmware">Step 1 : Build ATF (Arm Trusted Firmware)</h2>
<p>The u-boot build for Orange Pi Zero 2 expects ATF image, so the first thing we need to do is get the ATF image built. For this, pull the ATF source code from GitHub.</p>
<div class="alert alert-info alert-dismissible fade show" role="alert">
	
For reference, the HEAD of my ATF clone points to be3e0b896f58a7b0dffcdc8cf795b9f2dfa29915. Use this, just in case, something breaks in future.

  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div id="terminal" >
	
	<section id="terminal__bar">
		<div id="bar__buttons">
			<button class="bar__button" id="bar__button--exit">&#10005;</button>
			<button class="bar__button">&#9472;</button>
			<button class="bar__button">&#9723;</button>
		</div>
		<span id="bar__user">code@slashinit </span>
	</section>
	
	<section id="terminal__body">
		
	  <div class="terminal__text">
	  <pre><br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$ git clone https&#58;//github.com/ARM-software/arm-trusted-firmware.git<br>Cloning into &#39;arm-trusted-firmware&#39;...<br>remote: Enumerating objects: 123350, done.<br>remote: Counting objects: 100% (8660/8660), done.<br>remote: Compressing objects: 100% (3259/3259), done.<br>remote: Total 123350 (delta 5304), reused 8320 (delta 5214), pack-reused 114690<br>Receiving objects: 100% (123350/123350), 37.24 MiB | 786.00 KiB/s, done.<br>Resolving deltas: 100% (80795/80795), done.<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$<br><br></pre>
	  </div>
	</section>
</div>

<p>Setup the ARCH and CROSS_COMPILE environment variables.
<div id="terminal" >
	
	<section id="terminal__bar">
		<div id="bar__buttons">
			<button class="bar__button" id="bar__button--exit">&#10005;</button>
			<button class="bar__button">&#9472;</button>
			<button class="bar__button">&#9723;</button>
		</div>
		<span id="bar__user">code@slashinit </span>
	</section>
	
	<section id="terminal__body">
		
	  <div class="terminal__text">
	  <pre><br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$ export ARCH=arm64<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$ export CROSS_COMPILE=/opt/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu-<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$<br><br></pre>
	  </div>
	</section>
</div>
</p>
<p>Trigger the build.
<div id="terminal" >
	
	<section id="terminal__bar">
		<div id="bar__buttons">
			<button class="bar__button" id="bar__button--exit">&#10005;</button>
			<button class="bar__button">&#9472;</button>
			<button class="bar__button">&#9723;</button>
		</div>
		<span id="bar__user">code@slashinit </span>
	</section>
	
	<section id="terminal__body">
		
	  <div class="terminal__text">
	  <pre><br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi/arm-trusted-firmware</span>$ make PLAT=sun50i_h616 DEBUG=1 -j8<br>Building sun50i_h616<br>  CC      lib/libfdt/fdt.c<br>  CC      lib/libfdt/fdt_addresses.c<br>  CC      lib/libfdt/fdt_empty_tree.c<br>  CC      lib/libfdt/fdt_ro.c<br>  CC      lib/libfdt/fdt_rw.c<br>  CC      lib/libfdt/fdt_strerror.c<br>  CC      lib/libfdt/fdt_sw.c<br>  CC      lib/libfdt/fdt_wip.c<br>  CC      lib/libc/abort.c<br>  CC      lib/libc/assert.c<br>  CC      lib/libc/exit.c<br>  CC      lib/libc/memchr.c<br>  CC      lib/libc/memcmp.c<br>  CC      lib/libc/memcpy.c<br>  CC      lib/libc/memcpy_s.c<br>  CC      lib/libc/memmove.c<br>  CC      lib/libc/memrchr.c<br>  CC      lib/libc/memset.c<br>  CC      lib/libc/printf.c<br>  CC      lib/libc/putchar.c<br>  CC      lib/libc/puts.c<br>  CC      lib/libc/snprintf.c<br>  CC      lib/libc/strchr.c<br>  CC      lib/libc/strcmp.c<br>  CC      lib/libc/strlcat.c<br>  CC      lib/libc/strlcpy.c<br>  CC      lib/libc/strlen.c<br>  CC      lib/libc/strncmp.c<br>  CC      lib/libc/strnlen.c<br>  CC      lib/libc/strrchr.c<br>  CC      lib/libc/strtok.c<br>  CC      lib/libc/strtoul.c<br>  CC      lib/libc/strtoll.c<br>  CC      lib/libc/strtoull.c<br>  AS      lib/libc/aarch64/setjmp.S<br>  CC      lib/libc/strtol.c<br>  AR      /home/naveen/orangepi/arm-trusted-firmware/build/sun50i_h616/debug/lib/libfdt.a<br>  CC      bl31/bl31_context_mgmt.c<br>  CC      bl31/bl31_main.c<br>  CC      bl31/bl31_traps.c<br>  CC      bl31/interrupt_mgmt.c<br>  CC      common/backtrace/backtrace.c<br>  CC      common/bl_common.c<br>  CC      common/fdt_fixup.c<br>  CC      common/runtime_svc.c<br>  CC      common/tf_log.c<br>  CC      drivers/allwinner/axp/axp805.c<br>  CC      drivers/allwinner/axp/common.c<br>  CC      drivers/allwinner/sunxi_rsb.c<br>  CC      drivers/arm/gic/v2/gicdv2_helpers.c<br>  CC      drivers/arm/gic/v2/gicv2_helpers.c<br>  CC      drivers/arm/gic/v2/gicv2_main.c<br>  CC      drivers/console/multi_console.c<br>  CC      drivers/delay_timer/delay_timer.c<br>  CC      drivers/delay_timer/generic_delay_timer.c<br>  CC      lib/compiler-rt/builtins/popcountdi2.c<br>  CC      lib/compiler-rt/builtins/popcountsi2.c<br>  CC      lib/cpus/errata_report.c<br>  CC      lib/el3_runtime/aarch64/context_mgmt.c<br>  CC      lib/el3_runtime/cpu_data_array.c<br>  CC      lib/extensions/pmuv3/aarch64/pmuv3.c<br>  CC      lib/locks/bakery/bakery_lock_coherent.c<br>  CC      lib/psci/psci_common.c<br>  CC      lib/psci/psci_main.c<br>  CC      lib/psci/psci_mem_protect.c<br>  CC      lib/psci/psci_off.c<br>  CC      lib/psci/psci_on.c<br>  CC      lib/psci/psci_setup.c<br>  CC      lib/psci/psci_suspend.c<br>  CC      lib/psci/psci_system_off.c<br>  CC      lib/xlat_tables_v2/aarch64/xlat_tables_arch.c<br>  CC      lib/xlat_tables_v2/xlat_tables_context.c<br>  CC      lib/xlat_tables_v2/xlat_tables_core.c<br>  CC      lib/xlat_tables_v2/xlat_tables_utils.c<br>  CC      plat/allwinner/common/sunxi_bl31_setup.c<br>  CC      plat/allwinner/common/sunxi_common.c<br>  CC      plat/allwinner/common/sunxi_cpu_ops.c<br>  CC      plat/allwinner/common/sunxi_native_pm.c<br>  CC      plat/allwinner/common/sunxi_pm.c<br>  CC      plat/allwinner/common/sunxi_prepare_dtb.c<br>  CC      plat/allwinner/common/sunxi_security.c<br>  CC      plat/allwinner/common/sunxi_topology.c<br>  CC      plat/allwinner/sun50i_h616/sunxi_idle_states.c<br>  CC      plat/allwinner/sun50i_h616/sunxi_power.c<br>  CC      plat/common/aarch64/plat_common.c<br>  CC      plat/common/plat_bl_common.c<br>  CC      plat/common/plat_gicv2.c<br>  CC      plat/common/plat_log_common.c<br>  CC      plat/common/plat_psci_common.c<br>  CC      services/arm_arch_svc/arm_arch_svc_setup.c<br>  CC      services/std_svc/std_svc_setup.c<br>  AS      bl31/aarch64/bl31_entrypoint.S<br>  AS      bl31/aarch64/crash_reporting.S<br>  AS      bl31/aarch64/ea_delegate.S<br>  AS      bl31/aarch64/runtime_exceptions.S<br>  AS      common/aarch64/debug.S<br>  AS      lib/aarch64/cache_helpers.S<br>  AS      drivers/ti/uart/aarch64/16550_console.S<br>  AS      lib/cpus/aarch64/cortex_a53.S<br>  AS      lib/aarch64/misc_helpers.S<br>  AS      lib/cpus/aarch64/cpu_helpers.S<br>  AS      lib/cpus/aarch64/dsu_helpers.S<br>  AS      lib/cpus/aarch64/wa_cve_2017_5715_bpiall.S<br>  AS      lib/cpus/aarch64/wa_cve_2017_5715_mmu.S<br>  AS      lib/el3_runtime/aarch64/context.S<br>  AS      lib/el3_runtime/aarch64/cpu_data.S<br>  AS      lib/locks/exclusive/aarch64/spinlock.S<br>  AS      lib/psci/aarch64/psci_helpers.S<br>  AS      lib/psci/aarch64/runtime_errata.S<br>  AS      lib/xlat_tables_v2/aarch64/enable_mmu.S<br>  AS      plat/allwinner/common/plat_helpers.S<br>  AS      plat/common/aarch64/platform_helpers.S<br>  AS      plat/common/aarch64/platform_mp_stack.S<br>  PP      bl31/bl31.ld.S<br>  AR      /home/naveen/orangepi/arm-trusted-firmware/build/sun50i_h616/debug/lib/libc.a<br>  LD      /home/naveen/orangepi/arm-trusted-firmware/build/sun50i_h616/debug/bl31/bl31.elf<br>  BIN     /home/naveen/orangepi/arm-trusted-firmware/build/sun50i_h616/debug/bl31.bin<br>  OD      /home/naveen/orangepi/arm-trusted-firmware/build/sun50i_h616/debug/bl31/bl31.dump<br><br>Built /home/naveen/orangepi/arm-trusted-firmware/build/sun50i_h616/debug/bl31.bin successfully<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi/arm-trusted-firmware</span>$<br><br></pre>
	  </div>
	</section>
</div>
</p>
<p>The bin file called <code>bl31.bin</code> that we got above is our ATF image, that we can pass to u-boot during building in the next step.</p>
<h2 id="step-2--build-u-boot">Step 2 : Build u-boot</h2>
<p>The first step is to clone the u-boot source code.</p>
<div class="alert alert-info alert-dismissible fade show" role="alert">
	
For reference, my u-boot clone HEAD points to 65b9b3462bec2966911658836983819ab4e4823e.

  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div id="terminal" >
	
	<section id="terminal__bar">
		<div id="bar__buttons">
			<button class="bar__button" id="bar__button--exit">&#10005;</button>
			<button class="bar__button">&#9472;</button>
			<button class="bar__button">&#9723;</button>
		</div>
		<span id="bar__user">code@slashinit </span>
	</section>
	
	<section id="terminal__body">
		
	  <div class="terminal__text">
	  <pre><br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi/arm-trusted-firmware</span>$ cd ../<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$ git clone https&#58;//github.com/u-boot/u-boot.git<br>Cloning into &#39;u-boot&#39;...<br>remote: Enumerating objects: 943449, done.<br>remote: Counting objects: 100% (3682/3682), done.<br>remote: Compressing objects: 100% (1396/1396), done.<br>remote: Total 943449 (delta 2348), reused 3348 (delta 2268), pack-reused 939767<br>Receiving objects: 100% (943449/943449), 250.68 MiB | 749.00 KiB/s, done.<br>Resolving deltas: 100% (767634/767634), done.<br>Updating files: 100% (20293/20293), done.<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$<br><br></pre>
	  </div>
	</section>
</div>

<p>Setup the enviroment variables.
<div id="terminal" >
	
	<section id="terminal__bar">
		<div id="bar__buttons">
			<button class="bar__button" id="bar__button--exit">&#10005;</button>
			<button class="bar__button">&#9472;</button>
			<button class="bar__button">&#9723;</button>
		</div>
		<span id="bar__user">code@slashinit </span>
	</section>
	
	<section id="terminal__body">
		
	  <div class="terminal__text">
	  <pre><br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$ export ARCH=arm64<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$ export CROSS_COMPILE=/opt/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu-<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$<br><br></pre>
	  </div>
	</section>
</div>
</p>
<p>Configure the u-boot.
<div id="terminal" >
	
	<section id="terminal__bar">
		<div id="bar__buttons">
			<button class="bar__button" id="bar__button--exit">&#10005;</button>
			<button class="bar__button">&#9472;</button>
			<button class="bar__button">&#9723;</button>
		</div>
		<span id="bar__user">code@slashinit </span>
	</section>
	
	<section id="terminal__body">
		
	  <div class="terminal__text">
	  <pre><br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi</span>$ cd u-boot/<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi/u-boot</span>$ ls configs | grep orangepi_zero<br>orangepi_zero2_defconfig<br>orangepi_zero_defconfig<br>orangepi_zero_plus2_defconfig<br>orangepi_zero_plus2_h3_defconfig<br>orangepi_zero_plus_defconfig<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi/u-boot</span>$ make orangepi_zero2_defconfig -j8<br>  HOSTCC  scripts/basic/fixdep<br>  HOSTCC  scripts/kconfig/conf.o<br>  YACC    scripts/kconfig/zconf.tab.c<br>  LEX     scripts/kconfig/zconf.lex.c<br>  HOSTCC  scripts/kconfig/zconf.tab.o<br>  HOSTLD  scripts/kconfig/conf<br>#<br># configuration written to .config<br>#<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi/u-boot</span>$<br><br></pre>
	  </div>
	</section>
</div>
</p>
<p>Trigger the build. Note that we pass the ATF image that we built in previous step.
<div id="terminal" >
	
	<section id="terminal__bar">
		<div id="bar__buttons">
			<button class="bar__button" id="bar__button--exit">&#10005;</button>
			<button class="bar__button">&#9472;</button>
			<button class="bar__button">&#9723;</button>
		</div>
		<span id="bar__user">code@slashinit </span>
	</section>
	
	<section id="terminal__body">
		
	  <div class="terminal__text">
	  <pre><br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi/u-boot</span>$ make BL31=/home/naveen/orangepi/arm-trusted-firmware/build/sun50i_h616/debug/bl31.bin -j24<br>  UPD     include/generated/timestamp_autogenerated.h<br>  HOSTCC  scripts/basic/fixdep<br>  HOSTCC  scripts/dtc/flattree.o<br>  HOSTCC  scripts/dtc/dtc.o<br>  HOSTCC  scripts/dtc/fstree.o<br>  HOSTCC  scripts/dtc/data.o<br>  HOSTCC  scripts/dtc/livetree.o<br>  HOSTCC  scripts/dtc/treesource.o<br>  HOSTCC  scripts/dtc/srcpos.o<br>  HOSTCC  scripts/dtc/checks.o<br>  HOSTCC  scripts/dtc/util.o<br>  YACC    scripts/dtc/dtc-parser.tab.h<br>  LEX     scripts/dtc/dtc-lexer.lex.c<br>  YACC    scripts/dtc/dtc-parser.tab.c<br>  CFG     u-boot.cfg<br>  PYMOD   rebuild<br>  CC      lib/asm-offsets.s<br>  CC      arch/arm/lib/asm-offsets.s<br>  ...<br>  ...<br>  ...<br>  CC      spl/lib/date.o<br>  CC      spl/lib/rtc-lib.o<br>  AR      spl/drivers/i2c/built-in.o<br>  CC      spl/lib/elf.o<br>  AR      spl/drivers/serial/built-in.o<br>  AR      spl/boot/built-in.o<br>  OBJCOPY u-boot.srec<br>  OBJCOPY u-boot-nodtb.bin<br>  SYM     u-boot.sym<br>  AR      spl/drivers/mmc/built-in.o<br>  AR      spl/drivers/built-in.o<br>  RELOC   u-boot-nodtb.bin<br>  DTC     arch/arm/dts/sun50i-h616-orangepi-zero2.dtb<br>  DTC     arch/arm/dts/sun50i-h616-x96-mate.dtb<br>  SHIPPED dts/dt.dtb<br>  CAT     u-boot-dtb.bin<br>  MKIMAGE u-boot.img<br>  COPY    u-boot.dtb<br>  MKIMAGE u-boot-dtb.img<br>  AR      spl/lib/built-in.o<br>  COPY    u-boot.bin<br>  LD      spl/u-boot-spl<br>  SYM     spl/u-boot-spl.sym<br>  OBJCOPY spl/u-boot-spl-nodtb.bin<br>  COPY    spl/u-boot-spl.bin<br>  MKIMAGE spl/sunxi-spl.bin<br>  BINMAN  .binman_stamp<br>  OFCHK   .config<br><span id="terminal__prompt--user">naveen@workstation</span>:<span id="terminal__prompt--location">~/orangepi/u-boot</span>$<br><br></pre>
	  </div>
	</section>
</div>
</p>
<p>We can find the u-boot bin files in the current folder.</p>
<h2 id="conclusion">Conclusion</h2>
<p>This post talked about how you can compile u-boot from mainline source code, for Orange Pi Zero 2 board. The next post talks about <a href="/posts/boot-uboot-orange-pi-zero-2-using-usb-mode/">how we can boot u-boot image on Orange Pi Zero 2 using USB boot mode</a>.</p>

				</div>


				<div class="pt-5">
					<p>Categories:  
						<a href="/categories/bootloaders">
							
							bootloaders
							
						</a>
						
						<a href="/categories/operating-system">
							
							, 
							operating-system
							
						</a>
						
						Tags: 
						<a href="/tags/u-boot">
							
							#u-boot
						</a>
						
						<a href="/tags/arm">
							
							, 
							#arm
							
						</a>
						
						<a href="/tags/operating-system">
							
							, 
							#operating-system
							
						</a>
						
						<a href="/tags/boot">
							
							, 
							#boot
							
						</a>
						
						<a href="/tags/linux">
							
							, 
							#linux
							
						</a>
						
						<a href="/tags/microprocessors">
							
							, 
							#microprocessors
							
						</a>
						
					</p>
				</div>




			</div>

			

			<div class="col-md-12 col-lg-4 sidebar">
				<div class="sidebar-box">
					<h3 class="heading">Recent Posts in Category</h3>
					<div class="post-entry-sidebar">
						<ul>
							
							
							<li>
								<a href="https://www.slashinit.com/posts/boot-uboot-orange-pi-zero-2-using-usb-mode/">
									<img src="https://www.slashinit.com/posts/boot-uboot-orange-pi-zero-2-using-usb-mode//images/thumbnail.png" alt="Image" class="mr-4">
									<div class="text">
										<h4>Booting u-boot on Orange Pi Zero 2 using USB boot mode</h4>
										<div class="post-meta">
											<span class="mr-2">October 3, 2023</span>
										</div>
									</div>
								</a>
							</li>
							
							<li>
								<a href="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2/">
									<img src="https://www.slashinit.com/posts/building-uboot-orange-pi-zero-2//images/thumbnail.png" alt="Image" class="mr-4">
									<div class="text">
										<h4>Building u-boot for Orange Pi Zero 2</h4>
										<div class="post-meta">
											<span class="mr-2">October 2, 2023</span>
										</div>
									</div>
								</a>
							</li>
							
						</ul>
					</div>
				</div>
				

				<div class="sidebar-box">
					<h3 class="heading">Categories</h3>
					<ul class="categories">
						
						<li><a href="/categories/assembly">Assembly<span>(2)</span></a></li>
						
						<li><a href="/categories/bootloaders">Bootloaders<span>(3)</span></a></li>
						
						<li><a href="/categories/debugging">Debugging<span>(1)</span></a></li>
						
						<li><a href="/categories/linux-kernel">Linux Kernel<span>(2)</span></a></li>
						
						<li><a href="/categories/linux-tips">Linux Tips<span>(1)</span></a></li>
						
						<li><a href="/categories/microcontrollers">Microcontrollers<span>(1)</span></a></li>
						
						<li><a href="/categories/operating-system">Operating System<span>(4)</span></a></li>
						
						<li><a href="/categories/virtualization">Virtualization<span>(1)</span></a></li>
						
					</ul>
				</div>
				

				<div class="sidebar-box">
					<h3 class="heading">Tags</h3>
					<ul class="tags">
						
						<li><a href="/tags/arm">#arm</a></li>
						
						<li><a href="/tags/assembly">#assembly</a></li>
						
						<li><a href="/tags/boot">#boot</a></li>
						
						<li><a href="/tags/debugging">#debugging</a></li>
						
						<li><a href="/tags/linux">#linux</a></li>
						
						<li><a href="/tags/linux-kernel">#linux-kernel</a></li>
						
						<li><a href="/tags/microcontrollers">#microcontrollers</a></li>
						
						<li><a href="/tags/microprocessors">#microprocessors</a></li>
						
						<li><a href="/tags/operating-system">#operating-system</a></li>
						
						<li><a href="/tags/qemu">#qemu</a></li>
						
						<li><a href="/tags/u-boot">#u-boot</a></li>
						
						<li><a href="/tags/virtualization">#virtualization</a></li>
						
					</ul>
				</div>
			</div>
			

		</div>
	</div>
</section>

<script
  async
  src="https://utteranc.es/client.js"
  repo="slashinit/slashinit.github.io"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async>
</script>
<script type="text/javascript">
       var postpage=true
</script>




<div class="site-section bg-light">
	<div class="container">

		<div class="row mb-5">
			<div class="col-12">
				<h2>More Related Posts</h2>
			</div>
		</div>

		<div class="row align-items-stretch retro-layout">

			
			<div class="col-md-5 order-md-2">
				<a href="https://www.slashinit.com/posts/understanding-arm-naving-conventions/" class="hentry img-1 h-100 gradient" style="background-image: url('https://www.slashinit.com/posts/understanding-arm-naving-conventions//images/coretable.jpg');">
					
					
					
					
					
					
					
					
					
					<div class="text">
						<h2>Understanding ARM naming conventions - ARM7,ARMv7,Cortex-A7 ?</h2>
						<span>August 8, 2020</span>
					</div>
				</a>
			</div>
			

			<div class="col-md-7">
				
				<a href="https://www.slashinit.com/posts/installing-dhcp-tftp-nfs-network-boot/" class="hentry img-2 v-height mb30 gradient" style="background-image: url('https://www.slashinit.com/posts/installing-dhcp-tftp-nfs-network-boot//images/setup.png');">
					
					
					
					
					
					
					
					
					
					<div class="text text-sm">
						<h2>Installing DHCP, TFTP and NFS servers - Complete network boot setup</h2>
						<span>January 16, 2022</span>
					</div>
				</a>
				
				<div class="two-col d-block d-md-flex">
					
					<a href="https://www.slashinit.com/posts/boot-uboot-orange-pi-zero-2-using-usb-mode/" class="hentry v-height img-2 gradient" style="background-image: url('https://www.slashinit.com/posts/boot-uboot-orange-pi-zero-2-using-usb-mode//images/thumbnail.png');">
						
						
						
						
						
						
						
						
						
						
						
						
						
						<div class="text text-sm">
							<h2>Booting u-boot on Orange Pi Zero 2 using USB boot mode</h2>
							<span>October 3, 2023</span>
						</div>
					</a>
					
					
					<a href="https://www.slashinit.com/posts/booting-linux-orange-pi-zero-2/" class="hentry v-height img-2 ml-auto gradient" style="background-image: url('https://www.slashinit.com/posts/booting-linux-orange-pi-zero-2//images/thumbnail.png');">
						
						
						
						
						
						
						
						
						
						
						
						
						
						<div class="text text-sm">
							<h2>Booting linux image on Orange Pi Zero 2 - the boot test</h2>
							<span>September 20, 2023</span>
						</div>
					</a>
					
				</div>
			</div>
		</div>
		
	</div>
</div>



<div class="alertbar">
	<div class="container text-center">
        <span>
            
			
            
            &nbsp; Never miss a <b>post</b>, subscribe to our newsletter
        </span>

        <form action="https://gmail.us21.list-manage.com/subscribe/post?u=dc1a11007f5ffe738c5597e44&amp;amp;id=01231dd0d6&amp;amp;f_id=0022dfe6f0" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate>
		<input type="email" placeholder="Email" name="EMAIL" autocomplete="on" required>
	    	
	    	<div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_dc1a11007f5ffe738c5597e44_01231dd0d6" tabindex="-1" value=""></div>
		<input type="submit" value="Subscribe" name="subscribe" >
        </form>

	</div>
</div>




<div class="site-footer">
	<div class="container">
		<div class="row mb-5">
			<div class="col-md-4">
				<h3 class="footer-heading mb-4">Why this blog?</h3>
				<p>"If you can't explain it to a 6 years old, you don't understand it yourself " - Albert Einstein</p>
				<p>This blog aims exactly that - to explain the ideas of system programming in the most interesting and intuitive ways.</p>
			</div>
			<div class="col-md-3 ml-auto">
				
				<ul class="list-unstyled float-left mr-5">
					<li><a href="/about">About</a></li>
					<li><a href="/contact">Contact</a></li>
					<li><a href="/terms-conditions">Terms & Conditions</a></li>
				</ul>
				<ul class="list-unstyled float-left">
				</ul>
			</div>
			<div class="col-md-4">
				<div>
					<h3 class="footer-heading mb-4">Connect With Us</h3>
					<p>
						<a href="https://github.com/slashinit" target="_blank"><i class="fa fa-github pt-2 pr-2 pb-2 pl-0" aria-hidden="true"></i></a>
						<a href="/contact"><i class="fa fa-envelope p-2" aria-hidden="true"></i></a>
					</p>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-12 text-center">
				<p>
					
					Copyright &copy; <script>document.write(new Date().getFullYear());</script> All rights reserved | Designed with <i class="fa fa-heart" aria-hidden="true" style="color:red;"></i> by <a href="https://colorlib.com" target="_blank" >Colorlib</a> and <a href="/" target="_blank" >Slashinit</a>
					
				</p>
			</div>
		</div>
	</div>
</div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js"></script>
<script src="/js/main.js"></script>
</body>
</html>
